<div class="container-fluid">
  <h1 class="mb-4">Quản lý ảnh</h1>
  
  <% if (success && success.length > 0) { %>
    <div class="alert alert-success alert-dismissible fade show">
      <%= success %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% } %>
  
  <% if (error && error.length > 0) { %>
    <div class="alert alert-danger alert-dismissible fade show">
      <%= error %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% } %>
  
  <div class="d-flex justify-content-between align-items-center mb-3">
    <p>Tổng số: <strong><%= images.length %></strong> ảnh</p>
    <a href="/admin/images/create" class="btn btn-primary">
      <i class="bi bi-plus-circle"></i> Thêm ảnh mới
    </a>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Ảnh</th>
          <th>Tên</th>
          <th>Frame</th>
          <th>Tác giả</th>
          <th>Vị trí (x, y, z)</th>
          <th>Xoay (x, y, z)</th>
          <th>Ngày tạo</th>
          <th>Thao tác</th>
        </tr>
      </thead>
      <tbody>
        <% if (images && images.length > 0) { %>
          <% images.forEach(image => { %>
            <tr>
              <td><%= image.id %></td>
              <td>
                <% if (image.url) { %>
                  <img src="<%= image.url %>" alt="<%= image.name %>" style="max-width: 100px; max-height: 60px;">
                <% } else { %>
                  <span class="badge bg-secondary">Không có ảnh</span>
                <% } %>
              </td>
              <td><%= image.name %></td>
              <td><%= image.frameUse %></td>
              <td><%= image.author || 'Không có' %></td>
              <td>
                <%= image.positionX || '0' %>,
                <%= image.positionY || '0' %>,
                <%= image.positionZ || '0' %>
              </td>
              <td>
                <%= image.rotationX || '0' %>°,
                <%= image.rotationY || '0' %>°,
                <%= image.rotationZ || '0' %>°
              </td>
              <td>
                <% if (image.createdAt) { %>
                  <%= new Date(image.createdAt).toLocaleString('vi-VN') %>
                <% } else { %>
                  Không có
                <% } %>
              </td>
              <td>
                <a href="/admin/images/edit/<%= image.id %>" class="btn btn-sm btn-info">
                  <i class="bi bi-pencil"></i>
                </a>
                <a href="/admin/images/delete/<%= image.id %>" class="btn btn-sm btn-danger" 
                   onclick="return confirm('Bạn có chắc muốn xóa ảnh này?');">
                  <i class="bi bi-trash"></i>
                </a>
              </td>
            </tr>
          <% }); %>
        <% } else { %>
          <tr>
            <td colspan="9" class="text-center">Không có ảnh nào</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>